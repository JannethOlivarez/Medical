<p-card>
    <br>
    <!--Diaologo de Confirmacion-->
    <p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text">
    </p-confirmDialog>
    <!--Tabla con los Dientes-->
    <div class="grid">
        <div class="col-12 md:col-6 lg:col-12 sm:col-3">
            <table id="mitable">
                <tr>
                    <td style="text-align: center;" *ngFor="let diente of listaObjArriba">
                        <div *ngIf="diente.tratamientos != '[]'" class="dientes outerWrap" id="{{diente}}"
                            (click)="establecerTratamiento(diente)"
                            [style.backgroundImage]="'url(assets/demo/images/diente.png)'"
                            style="margin-top: 20%; margin-left: 20%; margin-right: 20%;">
                            <div class="dientes layer1" *ngFor="let tratamiento of diente.tratamientos"
                                [style.zIndex]="tratamiento.index"
                                [style.backgroundImage]="'url(assets/demo/images/'+tratamiento.imagen+'.png)'">
                            </div>
                        </div>
                        <span>{{diente.diente}}</span>
                        <div *ngIf="diente.diente==11" style="width: 50px"></div>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: center;" *ngFor="let diente of listaObjAbajo">
                        <div *ngIf="diente.tratamientos != '[]'" class="dientes outerWrap" id="{{diente}}"
                            (click)="establecerTratamiento(diente)"
                            [style.backgroundImage]="'url(assets/demo/images/diente.png)'"
                            style="margin-top: 20%; margin-left: 20%; margin-right: 20%;">
                            <div class="dientes layer1" *ngFor="let tratamiento of diente.tratamientos"
                                [style.zIndex]="tratamiento.index"
                                [style.backgroundImage]="'url(assets/demo/images/'+tratamiento.imagen+'.png)'">
                            </div>
                        </div>
                        <span>{{diente.diente}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <!--Caras del diente-->
    <div class="grid"
        *ngIf="tratamientoSeleccionado && (tratamientoSeleccionado.imagen==NECESARIO || tratamientoSeleccionado.imagen==REALIZADO)">
        <p-panel header="Mapa del Diente" class="col-12">
            <div class="col-offset-5 col-1" style="margin: 1%;">
                <table>
                    <tr>
                        <td></td>
                        <td class="superficieDientes" (click)="seleccionadoLado('arriba')"
                            [style.backgroundColor]="lados.arriba">
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td class="superficieDientes" (click)="seleccionadoLado('izquierda')"
                            [style.backgroundColor]="lados.izquierda"></td>
                        <td class="superficieDientes" (click)="seleccionadoLado('centro')"
                            [style.backgroundColor]="lados.centro">
                        </td>
                        <td class="superficieDientes" (click)="seleccionadoLado('derecha')"
                            [style.backgroundColor]="lados.derecha">
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td class="superficieDientes" (click)="seleccionadoLado('abajo')"
                            [style.backgroundColor]="lados.abajo">
                        </td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </p-panel>
    </div>
    <br>
    <!--Splitter Tratamientos y Detalles-->
    <p-splitter>
        <ng-template pTemplate>
            <p-panel header="Tratamientos" class="col-12">
                <div class="container" style="margin: 2%;">
                    <div class="row">
                        <div class="grid">
                            <div class="col-6" *ngFor="let tratamiento of tratamientosOdontograma"
                                (click)="selecionarTratamiento(tratamiento)"
                                [style.backgroundColor]="tratamiento.seleccionado">
                                <img [src]="'assets/demo/images/'+tratamiento.imagen+'.png'"
                                    alt="{{tratamiento.nombre}}" style="width: 30px ;height: 30px">
                                <label style="margin: 10%;">{{tratamiento.nombre}}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <br>
            </p-panel>
        </ng-template>
        <ng-template pTemplate>
            <p-panel header="Detalles" class="col-12">
                <p-table #dt1 [value]="listaTratamientosMostrar" dataKey="id" [rows]="5" [loading]="loading"
                    [rowHover]="true" styleClass="p-datatable-gridlines" [paginator]="true"
                    [globalFilterFields]="['name','country.name','representative.name','status']"
                    responsiveLayout="scroll">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 7rem;">
                                <div class="flex justify-content-between align-items-center">
                                    N° diente
                                </div>
                            </th>
                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    Diagnóstico
                                </div>
                            </th>
                            <th style="width: 8rem">
                                <div class="flex justify-content-between align-items-center">
                                    Opciones
                                </div>
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-diente>
                        <tr>
                            <td style="min-width: 6rem;">
                                {{diente.diente}}
                            </td>
                            <td style="min-width: 14rem;">
                                {{diente.tratamiento.nombre}}
                            </td>
                            <td class="text-center" style="min-width: 6rem;">

                                <button pButton pRipple type="button" icon="pi pi-trash "
                                    class="p-button-rounded p-button-danger mr-2 mb-2"
                                    (click)="confirmacionEliminacionTratamimento(diente)"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-panel>


        </ng-template>
    </p-splitter>
    <br>
    <!--Tabla -->
    <table id="mitable" style="margin-left: -9;">
        <tr class="mitr">
            <td style="font-family:Arial">P.F S I</td>
            <td style="font-family:Arial"> <input type="text" name="pfsi" [(ngModel)]="odontograma.pfsi"></td>
            <td style="font-family:Arial">P.T S I</td>
            <td> <input type="text" name="ptsi" [(ngModel)]="odontograma.ptsi"></td>
        </tr>
        <tr class="mitr">
            <td style="font-family:Arial">P.R S I</td>
            <td> <input type="text" name="prsi" [(ngModel)]="odontograma.prsi"></td>
            <td style="font-family:Arial">Tartrectomía S I</td>
            <td> <input type="text" name="tartrectomiasi" [(ngModel)]="odontograma.tartrectomiasi"></td>
        </tr>
        <tr class="mitr">
            <td colspan="4">
                <div class="ui-g">
                    <div style="font-family:Arial" class="ui-g-4">P.F.= Prótesis Fija</div>
                    <div style="font-family:Arial" class="ui-g-4">P.R.= Prótesis Removible</div>
                    <div style="font-family:Arial" class="ui-g-4">P.T.= Prótesis Total</div>
                    <div style="font-family:Arial" class="ui-g-4">-Piezas susceptibles Usar lápiz azul-</div>
                    <div style="font-family:Arial" class="ui-g-4">-Piezas que no se pueden arreglar.Use lápiz rojo-
                    </div>
                    <div style="font-family:Arial" class="ui-g-4">-Piezas que faltan. Usar lápiz negro-</div>
                    <div style="font-family:Arial" class="ui-g-12">
                        P.F.= Registrar piezas pilares en azul y en rojo reemplazadas <br>
                        P.R.= Registrar en azul placa reemplazada<br>
                        P.F.= Marcar con EQUIS (X) la prótesis total reemplazada y si son las dos en ambos
                        cuadros
                    </div>
                </div>
            </td>
        </tr>
        <tr class="mitr">
            <td colspan="2">
                <label style="font-family:Arial" class="form-control-label" id="observaciones9"
                    for="inputSuccess">Observaciones: Prótesis
                    Articulación - Cálculos- Pigmentación - Versiones - Enclas </label>
                <textarea maxlength="500" style="resize:none;width: 100%;" rows="3" name="observaciones"
                    [(ngModel)]="odontograma.observaciones"></textarea>
            </td>
            <td colspan="2" >
                <label  style="font-family:Arial"class="form-control-label col-3" id="observaciones9" for="inputSuccess">Concepto</label>
                <p-dropdown filter="true" [options]="concepto" [ngClass]="{'ng-dirty ng-invalid' : !conceptoId.valid}"
                    name="conceptoId" #conceptoId="ngModel" [(ngModel)]="odontograma.conceptoId" required></p-dropdown>
            </td>
        </tr>
        <tr class="mitr">
            <td colspan="2">
                <label style="font-family:Arial" class="form-control-label" id="observaciones9"
                    for="inputSuccess">Informe Rx Panorámica</label>
                <textarea maxlength="500" style="resize:none;width: 100%;" rows="3" name="informePanoramica"
                    [(ngModel)]="odontograma.informePanoramica"></textarea>
            </td>
            <td colspan="2">
                <label style="font-family:Arial" class="form-control-label" id="observaciones9"
                    for="inputSuccess">Recomendaciones</label>
                <textarea maxlength="500" style="resize:none;width: 100%;" rows="3" name="recomendacion"
                    [(ngModel)]="odontograma.recomendacion"></textarea>
            </td>
        </tr>
    </table>
    <p-divider class="col-12"></p-divider>
    <div class="col-offset-10">
        <button pButton type="button" style="font-size: medium;" label="Guardar" class="p-button-success" (click)="guardarOdontrograma()"></button>
    </div>
</p-card>